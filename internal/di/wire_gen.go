// Code generated by Wire. DO NOT EDIT.

//go:generate go run -mod=mod github.com/google/wire/cmd/wire
//go:build !wireinject
// +build !wireinject

package di

import (
	"github.com/gin-gonic/gin"
	"github.com/google/wire"
)

// Injectors from wire.go:

// InitializeServer 使用 Wire 构建 Gin Engine
func InitializeServer(configPath string) (*gin.Engine, error) {
	config, err := ProvideConfig(configPath)
	if err != nil {
		return nil, err
	}
	appInit, err := ProvideAppInit(config)
	if err != nil {
		return nil, err
	}
	db, err := ProvideDB(config)
	if err != nil {
		return nil, err
	}
	repository := ProvideRepository(db)
	services := ProvideServices(repository)
	handlers := ProvideHandlers(services)
	router := ProvideRouter(handlers)
	engine := ProvideGinEngine(appInit, router)
	return engine, nil
}

// InitializeServerApp 使用 Wire 构建完整的 ServerApp（包含清理函数）
func InitializeServerApp(configPath string) (*ServerApp, error) {
	config, err := ProvideConfig(configPath)
	if err != nil {
		return nil, err
	}
	appInit, err := ProvideAppInit(config)
	if err != nil {
		return nil, err
	}
	db, err := ProvideDB(config)
	if err != nil {
		return nil, err
	}
	repository := ProvideRepository(db)
	services := ProvideServices(repository)
	handlers := ProvideHandlers(services)
	router := ProvideRouter(handlers)
	engine := ProvideGinEngine(appInit, router)
	cacheInterface, err := ProvideCache(config)
	if err != nil {
		return nil, err
	}
	appDependencies := ProvideAppDependencies(config, db, cacheInterface, repository, services, handlers)
	serverApp := ProvideServerApp(engine, appDependencies)
	return serverApp, nil
}

// InitializeApp 初始化完整应用依赖（可选，用于测试或其他场景）
func InitializeApp(configPath string) (*AppDependencies, error) {
	config, err := ProvideConfig(configPath)
	if err != nil {
		return nil, err
	}
	db, err := ProvideDB(config)
	if err != nil {
		return nil, err
	}
	cacheInterface, err := ProvideCache(config)
	if err != nil {
		return nil, err
	}
	repository := ProvideRepository(db)
	services := ProvideServices(repository)
	handlers := ProvideHandlers(services)
	appDependencies := ProvideAppDependencies(config, db, cacheInterface, repository, services, handlers)
	return appDependencies, nil
}

// wire.go:

// 基础设施集合
var infrastructureSet = wire.NewSet(
	ProvideConfig,
	ProvideAppInit,
	ProvideDB,
	ProvideCache,
)

// 业务逻辑集合
var businessSet = wire.NewSet(
	ProvideRepository,
	ProvideServices,
	ProvideHandlers,
	ProvideAppDependencies,
)

// 应用层集合
var applicationSet = wire.NewSet(
	ProvideRouter,
	ProvideGinEngine,
)
